"use strict";function _slicedToArray(t,a){return _arrayWithHoles(t)||_iterableToArrayLimit(t,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,a){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var e=[],n=!0,r=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(e.push(i.value),!a||e.length!==a);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return e}}function _arrayWithHoles(t){if(Array.isArray(t))return t}!function(){var t=function(){for(var x={elements:[]},E=0,I="default",m="_",A={"data-lax-opacity":function(t,a){t.opacity=a},"data-lax-translate":function(t,a){t.transform+=" translate(".concat(a,"px, ").concat(a,"px)")},"data-lax-translate-x":function(t,a){t.transform+=" translateX(".concat(a,"px)")},"data-lax-translate-y":function(t,a){t.transform+=" translateY(".concat(a,"px)")},"data-lax-scale":function(t,a){t.transform+=" scale(".concat(a,")")},"data-lax-scale-x":function(t,a){t.transform+=" scaleX(".concat(a,")")},"data-lax-scale-y":function(t,a){t.transform+=" scaleY(".concat(a,")")},"data-lax-skew":function(t,a){t.transform+=" skew(".concat(a,"deg, ").concat(a,"deg)")},"data-lax-skew-x":function(t,a){t.transform+=" skewX(".concat(a,"deg)")},"data-lax-skew-y":function(t,a){t.transform+=" skewY(".concat(a,"deg)")},"data-lax-rotate":function(t,a){t.transform+=" rotate(".concat(a,"deg)")},"data-lax-rotate-x":function(t,a){t.transform+=" rotateX(".concat(a,"deg)")},"data-lax-rotate-y":function(t,a){t.transform+=" rotateY(".concat(a,"deg)")},"data-lax-brightness":function(t,a){t.filter+=" brightness(".concat(a,"%)")},"data-lax-contrast":function(t,a){t.filter+=" contrast(".concat(a,"%)")},"data-lax-hue-rotate":function(t,a){t.filter+=" hue-rotate(".concat(a,"deg)")},"data-lax-blur":function(t,a){t.filter+=" blur(".concat(a,"px)")},"data-lax-invert":function(t,a){t.filter+="  invert(".concat(a,"%)")},"data-lax-saturate":function(t,a){t.filter+="  saturate(".concat(a,"%)")},"data-lax-grayscale":function(t,a){t.filter+="  grayscale(".concat(a,"%)")},"data-lax-bg-pos":function(t,a){t.backgroundPosition="".concat(a,"px ").concat(a,"px")},"data-lax-bg-pos-x":function(t,a){t.backgroundPositionX="".concat(a,"px")},"data-lax-bg-pos-y":function(t,a){t.backgroundPositionY="".concat(a,"px")}},t="",a=0;a<20;a++)t+=" "+5*a+" "+47*a%360+", ";function T(t,a){for(var e=0;t[e][0]<=a&&void 0!==t[e+1];)e+=1;var n=t[e][0],r=void 0===t[e-1]?n:t[e-1][0],o=t[e][1],i=void 0===t[e-1]?o:t[e-1][1];return Math.min(Math.max((a-r)/(n-r),0),1)*(o-i)+i}function g(t){return("("===t[0]?eval:parseFloat)(t)}return x.presets={linger:function(){return{"data-lax-translate-y":"(vh*0.7) 0, 0 200, -500 0"}},lazy:function(t){return{"data-lax-translate-y":"(vh) 0, (-elh) ".concat(0<arguments.length&&void 0!==t?t:100)}},eager:function(t){return{"data-lax-translate-y":"(vh) 0, (-elh) -".concat(0<arguments.length&&void 0!==t?t:100)}},slalom:function(t){var a=0<arguments.length&&void 0!==t?t:50;return{"data-lax-translate-x":"vh ".concat(a,", (vh*0.8) ").concat(-a,", (vh*0.6) ").concat(a,", (vh*0.4) ").concat(-a,", (vh*0.2) ").concat(a,", (vh*0) ").concat(-a,", (-elh) ").concat(a)}},crazy:function(){return{"data-lax-hue-rotate":"".concat(t," | loop=20")}},spin:function(t){return{"data-lax-rotate":"(vh) 0, (-elh) ".concat(0<arguments.length&&void 0!==t?t:360)}},spinRev:function(t){return{"data-lax-rotate":"(vh) 0, (-elh) ".concat(-(0<arguments.length&&void 0!==t?t:360))}},spinIn:function(t){return{"data-lax-rotate":"vh ".concat(0<arguments.length&&void 0!==t?t:360,", (vh*0.5) 0")}},spinOut:function(t){return{"data-lax-rotate":"(vh*0.5) 0, -elh ".concat(0<arguments.length&&void 0!==t?t:360)}},blurInOut:function(t){var a=0<arguments.length&&void 0!==t?t:40;return{"data-lax-blur":"(vh) ".concat(a,", (vh*0.8) 0, (vh*0.2) 0, 0 ").concat(a)}},blurIn:function(t){return{"data-lax-blur":"(vh) ".concat(0<arguments.length&&void 0!==t?t:40,", (vh*0.7) 0")}},blurOut:function(t){return{"data-lax-blur":"(vh*0.3) 0, 0 ".concat(0<arguments.length&&void 0!==t?t:40)}},fadeInOut:function(){return{"data-lax-opacity":"(vh) 0, (vh*0.8) 1, (vh*0.2) 1, 0 0"}},fadeIn:function(){return{"data-lax-opacity":"(vh) 0, (vh*0.7) 1"}},fadeOut:function(){return{"data-lax-opacity":"(vh*0.3) 1, 0 0"}},driftLeft:function(t){var a=0<arguments.length&&void 0!==t?t:100;return{"data-lax-translate-x":"vh ".concat(a,", -elh ").concat(-a)}},driftRight:function(t){var a=0<arguments.length&&void 0!==t?t:100;return{"data-lax-translate-x":"vh ".concat(-a,", -elh ").concat(a)}},leftToRight:function(t){return{"data-lax-translate-x":"vh 0, -elh (vw*".concat(0<arguments.length&&void 0!==t?t:1,")")}},rightToLeft:function(t){return{"data-lax-translate-x":"vh 0, -elh (vw*".concat(-(0<arguments.length&&void 0!==t?t:1),")")}},zoomInOut:function(t){var a=0<arguments.length&&void 0!==t?t:.2;return{"data-lax-scale":"(vh) ".concat(a,", (vh*0.8) 1, (vh*0.2) 1, -elh ").concat(a)}},zoomIn:function(t){return{"data-lax-scale":"(vh) ".concat(0<arguments.length&&void 0!==t?t:.2,", (vh*0.7) 1")}},zoomOut:function(t){return{"data-lax-scale":"(vh*0.3) 1, -elh ".concat(0<arguments.length&&void 0!==t?t:.2)}},speedy:function(t){var a=0<arguments.length&&void 0!==t?t:30;return{"data-lax-skew-x":"(vh) ".concat(a,", -elh ").concat(-a)}},swing:function(t){var a=0<arguments.length&&void 0!==t?t:30;return{"data-lax-skew-y":"(vh) ".concat(a,", -elh ").concat(-a)}}},x.addPreset=function(t,a){x.presets[t]=a},x.setup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};x.breakpoints=t.breakpoints||{},x.selector=t.selector||".lax",x.populateElements()},x.removeElement=function(a){var t=x.elements.findIndex(function(t){return t.el=a});-1<t&&x.elements.splice(t,1)},x.createLaxObject=function(t){return{el:t,originalStyle:{transform:t.style.transform,filter:t.style.filter},transforms:{}}},x.calcTransforms=function(i){for(var c=i.el,r=[],t=0;t<c.attributes.length;t++){var a=c.attributes[t];-1<a.name.indexOf("data-lax-preset")&&r.push(a)}for(var e=function(t){var a=r[t],e=a.name.split(m),o=e[1]?"".concat(m).concat(e[1]):"";a.value.split(" ").forEach(function(t){var a=t.split("-"),e=x.presets[a[0]];if(e){var n=e(a[1]);for(var r in n)c.setAttribute("".concat(r).concat(o),n[r])}else console.log("lax error: preset ".concat(a[0]," is not defined"))});var n=c.getAttribute("data-lax-anchor");n&&""!==n||c.setAttribute("data-lax-anchor","self"),c.attributes.removeNamedItem(a.name)},n=0;n<r.length;n++)e(n);if(!(c.attributes["data-lax-use-gpu"]&&"false"===c.attributes["data-lax-use-gpu"].value)&&(c.style["backface-visibility"]="hidden",c.style["-webkit-backface-visibility"]="hidden"),c.attributes["data-lax-use-gpu"]&&c.attributes.removeNamedItem("data-lax-use-gpu"),i.optimise=!1,c.attributes["data-lax-optimize"]&&"true"===c.attributes["data-lax-optimize"].value){i.optimise=!0;var o=c.getBoundingClientRect();c.setAttribute("data-lax-opacity","".concat(-o.height-1," 0, ").concat(-o.height," 1, ").concat(window.innerHeight," 1, ").concat(window.innerHeight+1," 0")),c.attributes.removeNamedItem("data-lax-optimize")}for(var l=0;l<c.attributes.length;l++){var s=c.attributes[l];if(!(s.name.indexOf("data-lax")<0)){var u=s.name.split(m),d=u[0].split("-"),f=u[1]||"default";if("lax"===d[1])if("data-lax-anchor"===s.name){i["data-lax-anchor"]="self"===s.value?c:document.querySelector(s.value);var v=i["data-lax-anchor"].getBoundingClientRect();i.anchorTop=Math.floor(v.top)+window.scrollY}else!function(){var t=_slicedToArray(s.value.replace(/vw/g,window.innerWidth).replace(/vh/g,window.innerHeight).replace(/elh/g,c.clientHeight).replace(/elw/g,c.clientWidth).replace(/\s+/g," ").split("|"),2),a=t[0],e=t[1],r={};e&&e.split(" ").forEach(function(t){var a=_slicedToArray(t.split("="),2),e=a[0],n=a[1];r[e]=e&&g(n)});var n=u[0],o=a.split(",").map(function(t){return t.trim().split(" ").map(g)}).sort(function(t,a){return t[0]-a[0]});i.transforms[n]||(i.transforms[n]={}),i.transforms[n][f]={valueMap:o,options:r}}()}}var h=c.attributes["data-lax-sprite-data"]&&c.attributes["data-lax-sprite-data"].value;if(h){i.spriteData=h.split(",").map(function(t){return parseInt(t)}),c.style.height=i.spriteData[1]+"px",c.style.width=i.spriteData[0]+"px";var p=c.attributes["data-lax-sprite-image"]&&c.attributes["data-lax-sprite-image"].value;p&&(c.style.backgroundImage="url(".concat(p,")"))}return i},x.addElement=function(t){var a=x.calcTransforms(x.createLaxObject(t));x.elements.push(a),x.updateElement(a)},x.populateElements=function(){x.elements=[],document.querySelectorAll(x.selector).forEach(x.addElement),I=x.getCurrentBreakPoint()},x.updateElements=function(){x.elements.forEach(function(t){x.calcTransforms(t),x.updateElement(t)}),I=x.getCurrentBreakPoint()},x.getCurrentBreakPoint=function(){var t="default",a=window.innerWidth;for(var e in x.breakpoints){if(!(parseFloat(x.breakpoints[e])<=a))break;t=e}return t},x.updateElement=function(t){var a=t.originalStyle,e=t.anchorTop,n=t.transforms,r=t.spriteData,o=t.el,i=e?e-E:E,c={transform:a.transform,filter:a.filter};for(var l in n){var s=n[l][I]||n[l].default;if(s){var u=i;s.options.offset&&(u+=s.options.offset),s.options.speed&&(u*=s.options.speed),s.options.loop&&(u%=s.options.loop);var d=A[l],f=T(s.valueMap,u);d&&d(c,f)}}if(r){var v=_slicedToArray(r,5),h=v[0],p=v[1],x=v[2],m=v[3],g=v[4],b=Math.floor(E/g)%x,y=b%m,w=Math.floor(b/m);c.backgroundPosition="-".concat(y*h,"px -").concat(w*p,"px")}if(0===c.opacity)o.style.opacity=0;else for(var k in c)o.style[k]=c[k]},x.update=function(t){E!==t&&(E=t,x.elements.forEach(x.updateElement))},x}();"undefined"!=typeof module&&void 0!==module.exports?module.exports=t:window.lax=t}();